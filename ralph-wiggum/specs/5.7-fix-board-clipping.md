# Spec: Phase 5.7 - Fix Board Content Left-Side Clipping

> **Goal:** Fix the Kanban board so the leftmost column is fully visible when the sidebar is open.
> **Context:** The Backlog column is partially cut off on the left edge, obscuring the column title and task card content.
> **Priority:** P0 - Critical (content inaccessible)

## Background

When the left sidebar is expanded, the Kanban board's first column (typically "Backlog") is clipped on its left edge. Users cannot see the full column title or task content.

## Root Cause

The `BoardContainer` component uses `justify-center` on a flex container:

**File:** `src/features/kanban/components/board-column.tsx` (Line 133)
```tsx
<div className='flex flex-row items-start justify-center gap-4'>
  {children}
</div>
```

**Problem:** When `justify-content: center` is applied to a flex container that overflows:
1. Content is centered relative to the container's visible bounds
2. The "start" of content (leftmost column) shifts to a negative offset
3. Horizontal scroll starts at position 0, making the negative space inaccessible
4. Result: leftmost column is clipped

**Math Example (1280px viewport):**
- Sidebar width: 256px (`16rem`)
- PageContainer padding: 48px (`md:px-6`)
- Available width: 1280 - 256 - 48 = 976px
- 3 columns Ã— 350px = 1050px required
- Overflow: 74px (split evenly by `justify-center` = 37px clipped on each side)

## 1. Change Flex Justification
**File:** `src/features/kanban/components/board-column.tsx`

**Current Code (Line 133):**
```tsx
<div className='flex flex-row items-start justify-center gap-4'>
```

**Fix:**
```tsx
<div className='flex flex-row items-start justify-start gap-4'>
```

**Alternative (auto-center only when space available):**
```tsx
<div className='flex flex-row items-start gap-4 mx-auto w-fit'>
```

## 2. Ensure ScrollArea Contains Content
**File:** `src/features/kanban/components/board-column.tsx`

**Current Structure (Lines 126-140):**
```tsx
export function BoardContainer({ children }: BoardContainerProps) {
  const dndContext = useDndContext();
  
  return (
    <ScrollArea className='w-full rounded-md whitespace-nowrap'>
      <div className={variations({ dragging: ... })}>
        <div className='flex flex-row items-start justify-center gap-4'>
          {children}
        </div>
      </div>
      <ScrollBar orientation='horizontal' />
    </ScrollArea>
  );
}
```

**Improved Fix:**
```tsx
export function BoardContainer({ children }: BoardContainerProps) {
  const dndContext = useDndContext();
  
  return (
    <ScrollArea className='w-full rounded-md whitespace-nowrap'>
      <div className={variations({ dragging: ... })}>
        {/* Use w-fit to size based on children, not viewport */}
        <div className='flex flex-row items-start gap-4 w-fit min-w-full'>
          {children}
        </div>
      </div>
      <ScrollBar orientation='horizontal' />
    </ScrollArea>
  );
}
```

**Explanation:**
- `w-fit`: Container width matches children's total width
- `min-w-full`: If children are narrower than viewport, container fills available space
- Removed `justify-center`: Content aligns to start, scroll works naturally

## 3. Column Width Consistency
**File:** `src/lib/constants/ui-dimensions.ts`

**Check:** Verify column width constant:
```typescript
export const KANBAN_DIMENSIONS = {
  COLUMN_WIDTH: 300,  // or 350?
  // ...
};
```

**File:** `src/features/kanban/components/board-column.tsx`

**Check:** Verify `BoardColumn` uses the constant:
```tsx
// Look for hardcoded width like 'w-[350px]' or 'w-80'
// Should use: `w-[${KANBAN_DIMENSIONS.COLUMN_WIDTH}px]` or a Tailwind config
```

**Action:** If widths are inconsistent, synchronize to a single source of truth.

## 4. Page Container Padding
**File:** `src/components/layout/page-container.tsx`

**Check:** Review horizontal padding:
```tsx
// Look for classes like 'px-6' or 'md:px-6'
// These reduce available width for the board
```

**Consideration:** If padding is excessive, reduce it for the board view:
```tsx
// Option: Remove horizontal padding for board pages
<div className='flex-1 overflow-auto'>  {/* No px-* */}
  {children}
</div>
```

## 5. Test Across Breakpoints
After fix, verify at these viewport widths:
- 1280px (laptop) with sidebar open
- 1024px (small laptop) with sidebar open
- 768px (tablet) - sidebar should collapse
- 1920px (desktop) with sidebar open

## Verification Checklist
- [ ] Backlog column title is fully visible
- [ ] Task cards in Backlog column are not clipped
- [ ] Horizontal scroll works from leftmost column to rightmost
- [ ] Adding more columns doesn't break layout
- [ ] Collapsing sidebar gives more board space
- [ ] Works on 1024px viewport with sidebar open

## Files to Modify
| File | Action |
|------|--------|
| `src/features/kanban/components/board-column.tsx` | Change `justify-center` to `justify-start`, add `w-fit min-w-full` |
| `src/lib/constants/ui-dimensions.ts` | Verify column width constant |
| `src/components/layout/page-container.tsx` | Consider reducing horizontal padding |

## Related Specs
- `5.1-sidebar-overhaul.md` - Sidebar width and layout
