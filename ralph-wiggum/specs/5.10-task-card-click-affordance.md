# Spec: Phase 5.10 - Task Card Click Affordance

> **Goal:** Add visual feedback to indicate task cards are clickable.
> **Context:** Users may not realize the entire card opens a details panel; only the drag handle is visually interactive.
> **Priority:** P2 - Medium (UX polish)

## Background

Task cards are clickable to open the InfoSidebar with task details, description editor, and session linking. However:
- The only visible interactive element is the drag handle (6-dot grip icon)
- No hover state indicates clickability
- Users might think cards are display-only

## Current State

**File:** `src/features/kanban/components/task-card.tsx`

```tsx
<Card
  ref={setNodeRef}
  style={style}
  className={cn(
    variants({ dragging: ... }),
    'cursor-pointer p-3'  // Only visual cue is cursor
  )}
  onClick={handleCardClick}
>
```

The `cursor-pointer` class shows a pointer cursor on hover, but there's no other visual feedback.

## 1. Add Hover State
**File:** `src/features/kanban/components/task-card.tsx`

**Option A - Border highlight:**
```tsx
<Card
  className={cn(
    variants({ dragging: ... }),
    'cursor-pointer p-3',
    'transition-all duration-150',
    'hover:border-primary/50 hover:shadow-md'
  )}
  onClick={handleCardClick}
>
```

**Option B - Background shift:**
```tsx
<Card
  className={cn(
    variants({ dragging: ... }),
    'cursor-pointer p-3',
    'transition-colors duration-150',
    'hover:bg-accent/50'
  )}
  onClick={handleCardClick}
>
```

**Option C - Scale effect (subtle):**
```tsx
<Card
  className={cn(
    variants({ dragging: ... }),
    'cursor-pointer p-3',
    'transition-transform duration-150',
    'hover:scale-[1.02]'
  )}
  onClick={handleCardClick}
>
```

**Recommendation:** Option A (border highlight) is most common for clickable cards.

## 2. Add Visual Indicator (Optional)
**File:** `src/features/kanban/components/task-card.tsx`

Add a small icon or indicator that the card opens details:

```tsx
import { IconChevronRight } from '@tabler/icons-react';

<Card onClick={handleCardClick} className="group ...">
  <div className="flex flex-row items-start justify-between gap-2">
    <h3 className="font-medium text-sm ...">{task.title}</h3>
    
    {/* Show on hover - indicates expandability */}
    <IconChevronRight 
      className="h-4 w-4 text-muted-foreground/0 group-hover:text-muted-foreground/50 transition-colors"
    />
    
    {/* Existing drag handle */}
    <Button variant="ghost" {...attributes} {...listeners}>
      <IconGripVertical className="h-4 w-4" />
    </Button>
  </div>
</Card>
```

## 3. Add Tooltip (Optional)
**File:** `src/features/kanban/components/task-card.tsx`

For first-time users or onboarding:

```tsx
import { Tooltip, TooltipContent, TooltipProvider, TooltipTrigger } from '@/components/ui/tooltip';

<TooltipProvider>
  <Tooltip>
    <TooltipTrigger asChild>
      <Card onClick={handleCardClick} className="cursor-pointer ...">
        {/* Card content */}
      </Card>
    </TooltipTrigger>
    <TooltipContent side="top">
      <p>Click to view details</p>
    </TooltipContent>
  </Tooltip>
</TooltipProvider>
```

**Note:** Tooltip may be too intrusive for frequent users. Consider adding only for first interaction.

## 4. Active/Selected State
**File:** `src/features/kanban/components/task-card.tsx`

If InfoSidebar shows a specific task, highlight that card:

```tsx
import { useInfobar } from '@/components/ui/infobar';

function TaskCard({ task }: TaskCardProps) {
  const { content } = useInfobar();
  const isSelected = content?.title === task.title;  // Or compare by ID if available
  
  return (
    <Card
      className={cn(
        'cursor-pointer p-3',
        isSelected && 'ring-2 ring-primary'
      )}
      onClick={handleCardClick}
    >
```

**Better approach:** Store selected task ID in context:
```tsx
// In InfobarContext, add:
selectedTaskId: string | null;
setSelectedTaskId: (id: string | null) => void;

// In TaskCard:
const { selectedTaskId } = useInfobar();
const isSelected = selectedTaskId === task.id;
```

## 5. Accessible Label
**File:** `src/features/kanban/components/task-card.tsx`

Add ARIA attributes for screen readers:

```tsx
<Card
  role="button"
  aria-label={`View details for ${task.title}`}
  tabIndex={0}
  onClick={handleCardClick}
  onKeyDown={(e) => {
    if (e.key === 'Enter' || e.key === ' ') {
      e.preventDefault();
      handleCardClick();
    }
  }}
  className="cursor-pointer ..."
>
```

## Verification Checklist
- [ ] Hover over task card → visual feedback appears
- [ ] Click card → InfoSidebar opens (after ISSUE-5.6 is fixed)
- [ ] Card with open details has distinct style (ring/highlight)
- [ ] Keyboard: Tab to card, Enter opens details
- [ ] Screen reader announces "View details for [task name]"

## Files to Modify
| File | Action |
|------|--------|
| `src/features/kanban/components/task-card.tsx` | Add hover classes, optional icon |
| `src/components/ui/infobar.tsx` | Optional: Add `selectedTaskId` to context |

## Design Tokens
Use existing design tokens for consistency:
- `border-primary/50` - Primary color at 50% opacity
- `shadow-md` - Medium shadow
- `ring-2 ring-primary` - Focus/selection ring
- `bg-accent/50` - Accent background
